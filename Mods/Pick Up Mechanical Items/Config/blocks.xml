<?xml version="1.0" encoding="utf-8"?>

<configs>
  <!-- Set a new material on the vending mechines so we can control the scrap -->
  <set xpath="/blocks/block[@name='cntVendingMachine2Broken']/property[@name='Material']/@value">Msteel_medium_vending_machine_nplm</set>
  <append xpath="/blocks/block[@name='cntVendingMachine2Broken']">
    <property name="Weight" value="7"/>
  </append>


  <!-- This is a dummy oject that several machines below will extend  -->
  <insertAfter xpath="/blocks/block[@name='cntVendingMachine2Broken']" >
    <block name="cntVendingMachine2BrokenCopyForExtending">
      <property name="CreativeMode" value="Player"/>
      <property name="DescriptionKey" value="cntVendingMachineGroupDesc"/>
      <property name="DisplayType" value="blockHardenedMulti"/>
      <property name="Stacknumber" value="10"/>
      <property name="Material" value="Msteel_medium_vending_machine_nplm"/>
      <property name="Weight" value="7"/>
      <property name="Shape" value="ModelEntity"/>
      <property name="Model" value="Entities/Crafting/sodaVendingMachineBrokenPrefab"/>
      <property name="ModelOffset" value="0,0,0"/>
      <property name="MultiBlockDim" value="1,2,1"/>
      <property name="ImposterExchange" value="imposterBlock" param1="143"/>
      <property name="Place" value="TowardsPlacerInverted"/>
      <property name="Path" value="solid"/>
      <property name="IsTerrainDecoration" value="true"/>
      <property name="StabilitySupport" value="false"/>
      <property name="EconomicValue" value="2000"/>
      <property name="Buff" value="buffShocked"/>
      <property class="RepairItems">
        <property name="resourceForgedSteel" value="10"/>
      </property>
      <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
      <drop event="Destroy" count="0"/>
      <property name="SortOrder1" value="B456"/>
      <property name="SortOrder2" value="0002"/>
      <property name="Group" value="Science"/>
      <property name="FilterTags" value="MC_building,SC_electrical,SC_commercial"/>
      <property name="Tags" value="challenge_elec_parts,challenge_mech_parts,challenge_steel"/>
      <property name="IndexName" value="challenge_steel"/>
    </block>
  </insertAfter>

  <!-- removing the existing extended machine so it can be re-extend a stub with no harvest drop on it -->
  <remove xpath="/blocks/block[@name='cntVendingMachineEnergy']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineWater']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineEnergyBroken']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineWaterBroken']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineSnacksFull']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineSnacksEmpty']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineSnacksFullBroken']/property[@name='Extends']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachineSnacksEmptyBroken']/property[@name='Extends']"/>

  <!-- removing the existing Harvest options on the mechanical non player items we want to harvest -->
  <remove xpath="/blocks/block[@name='cntForgeWorkstationBroken']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedChemistryStation']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedGeneratorbank']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedSolarbank']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedBatterybank']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedDewCollector']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedWorkbench']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedWorkbenchEmpty']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedCementMixer']/drop[@event='Harvest']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachine2Broken']/drop[@event='Harvest']"/>

  <!-- removing the existing Destroy options on the mechanical non player items we want to harvest in case they are not set to 0 -->
  <remove xpath="/blocks/block[@name='cntForgeWorkstationBroken']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedChemistryStation']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedGeneratorbank']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedSolarbank']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedBatterybank']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedDewCollector']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedWorkbench']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedWorkbenchEmpty']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntCollapsedCementMixer']/drop[@event='Destroy']"/>
  <remove xpath="/blocks/block[@name='cntVendingMachine2Broken']/drop[@event='Destroy']"/>


  <!-- adding back to blocks what we want to receive when harvesting the non player owned items -->
  <append xpath="/blocks/block[@name='cntForgeWorkstationBroken']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="forge" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedChemistryStation']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="chemistryStation" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedGeneratorbank']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="generatorbank" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedSolarbank']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="solarbank" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedBatterybank']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="batterybank" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedCampfire']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="campfire" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedDewCollector']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntDewCollector" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedWorkbench']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="workbench" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedWorkbenchEmpty']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="workbench" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntCollapsedCementMixer']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cementMixer" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachine2Broken']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachine2" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachine']">
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachine" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineEnergy']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineEnergy" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineWater']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineWater" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineEnergyBroken']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineEnergy" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineWaterBroken']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineWater" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineSnacksFull']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineSnacksFull" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineSnacksEmpty']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineSnacksFull" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineSnacksFullBroken']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineSnacksFull" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>

  <append xpath="/blocks/block[@name='cntVendingMachineSnacksEmptyBroken']">
    <property name="Extends" value="cntVendingMachine2BrokenCopyForExtending" param1="CustomIcon"/>
    <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble"/>
    <drop event="Destroy" name="cntVendingMachineSnacksFull" count="1" tool_category="Disassemble" />
    <drop event="Destroy" count="0"/>
    <property name="Weight" value="7"/>
  </append>
</configs>
